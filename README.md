# Cover Full-Stack Take-Home

Thank you for taking the time to complete this task.

You will build a mini version of MyCover where a user can:

1. View their savings and insurance portfolio
2. Chat with an AI assistant about that portfolio

We are looking for a practical solution with good engineering judgment.


## AI Usage (Allowed)

- Using AI tools is allowed and recommended (Cursor, ChatGPT, Copilot, etc.).
- Please include a short note in your submission:
  - where AI was used
  - what was generated by AI
  - what you reviewed/changed manually

## What to Build

### 1. Portfolio Page (Frontend)

Create a simple UI that presents:

- Total savings amount
- Total monthly insurance payment
- Portfolio items list

Each portfolio item should include at least:

- Product type (pension, insurance, savings, etc.)
- Provider
- Monthly payment
- Accumulated value
- Management fee

### 2. AI Chat About Portfolio (Frontend + Backend)

Add a chat panel where the user can ask questions about their portfolio.

Expected examples:

- "What is my highest monthly cost?"
- "Do I have duplicate coverages?"
- "Which product has the highest management fee?"
- "Summarize my portfolio in 3 bullet points"

The response must be based on the user's portfolio data loaded from the database.

### 3. Backend Behavior

Your backend should provide the application with:

- A way to fetch a user's portfolio data
- A way to send a user question and get an AI response

The AI response must be grounded in the specific user's portfolio data.

### 4. Login Flow

Include a simple but solid login flow for the app.

Requirements:

- User can log in and access only their own portfolio context
- Unauthorized requests are blocked
- Authentication errors return clear and safe responses

### 5. Database

Use a real database (SQL preferred) with at least:

- `users`
- `portfolio_items` (linked to user)

Seed one demo user with realistic data.

## Technical Requirements

- Node.js + TypeScript backend
- React + TypeScript frontend
- Good login/auth handling
- Input validation and clear error handling
- Reasonable service separation (route/controller/service/repository, or similar)
- Clean, maintainable code

## Software Engineering Principles

Please apply solid engineering practices:

- Keep code readable and modular (small focused functions, clear naming)
- Prefer reuse over duplication (DRY)
- Keep business logic separate from transport/framework code where reasonable
- Avoid magic values when possible (use constants/enums for repeated domain values)
- Handle edge cases explicitly (missing data, invalid input, empty portfolio)
- Design with basic scalability in mind (clean data access patterns, avoid unnecessary repeated work)
- Keep behavior predictable and testable

## Must-Have Scope

Prioritize:

- One working portfolio page
- One chat panel
- Backend support for portfolio retrieval and AI chat
- A working login flow
- DB schema + seed data
- AI answers grounded in portfolio DB data
- Clear `README` with setup and run instructions

## Nice-to-Have (Only If Time Remains)

- Streaming chat responses
- Chat history persistence
- Caching
- Docker compose setup
- Portfolio insights/recommendations section

## Testing Requirements

Add a minimal but meaningful automated quality suite.

Required:

- Unit tests
  - cover core business logic and data transformations
- Integration tests
  - cover portfolio retrieval flow
  - cover chat flow end-to-end through your API layer
  - cover authentication behavior for authorized and unauthorized requests
  - cover validation/error behavior for invalid input

Important:

- Tests must use the same payload format the frontend sends to the API.
- Do not use internal DB-only formats in tests just to make them pass.

## Submission

How to start and submit:

1. Clone this repository
2. Create a **private repository** in your own GitHub account and push the code there
3. Before writing any code, push your first commit with the message: `started`
4. Build your solution and commit as you go
5. When done, add `ZviCover` and `barakJ7` as collaborators and send us the repository link
6. Include a `README` with:
  - setup/run instructions
  - architecture decisions and tradeoffs
  - what you would improve with more time
  - short AI usage declaration

## How We Review

- Correctness and completeness of core flow
- Backend and frontend code quality
- API and data modeling quality
- Quality and realism of unit/integration tests
- Ability to deliver a practical, complete solution

## Suggested Data Shape (Example)

Use any schema you prefer. Example shape:

```json
{
  "user": {
    "id": "u1",
    "fullName": "Demo User",
    "mobile": "0501234567"
  },
  "portfolioItems": [
    {
      "type": "pension",
      "provider": "Harel",
      "monthlyPayment": 1200,
      "accumulatedValue": 420000,
      "managementFeePercent": 0.9
    },
    {
      "type": "health_insurance",
      "provider": "Phoenix",
      "monthlyPayment": 380,
      "accumulatedValue": 0,
      "managementFeePercent": 0
    }
  ]
}
```

## Notes

- You can keep design simple. We value clarity and usability over visual polish.
- If you cannot finish everything, submit what works and explain what is missing.
